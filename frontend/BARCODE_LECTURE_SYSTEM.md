# ูุธุงู ุงูุจุงุฑููุฏ ูููุญุงุถุฑุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ูุธุงู ุงูุจุงุฑููุฏ ููููู ูุฑุชุจุทุงู ุจูู ูุญุงุถุฑุฉ ูู ุงูุฌุฏูู ุงูุฏุฑุงุณู ุจุฏูุงู ูู ุงููุณู ูุงููุฑุญูุฉ ููุท. ูู ุจุงุฑููุฏ ูู ููุช ุงูุชูุงุก ูุณุงูู ููุช ุงูุชูุงุก ุงููุญุงุถุฑุฉ.

## โ ุงูุชุบููุฑุงุช ุงูููุฌุฒุฉ

### 1. ุชุญุฏูุซ Barcode Model (`server/models/Barcode.js`)

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ `schedule_id`: ุฑุงุจุท ุจุงูุฌุฏูู ุงูุฏุฑุงุณู
- โ ุฅุถุงูุฉ `lecture_info`: ูุนูููุงุช ุงููุญุงุถุฑุฉ (ุงููุงุฏุฉุ ุงููุญุงุถุฑุ ุงููุงุนุฉุ ุงููููุ ุงูููุช)
- โ ุฅุถุงูุฉ `expiry_time`: ููุช ุงูุชูุงุก ุงูุจุงุฑููุฏ (ูุณุงูู ููุช ุงูุชูุงุก ุงููุญุงุถุฑุฉ)
- โ ุฅุฒุงูุฉ ุงูุฑุจุท ุงููุจุงุดุฑ ุจุงููุณู ูุงููุฑุญูุฉ (ูุชู ุงูุญุตูู ุนููููุง ูู ุงูุฌุฏูู)

**ุงูุญููู ุงูุฌุฏูุฏุฉ:**
```javascript
schedule_id: ObjectId (ุฑุงุจุท ุจุงูุฌุฏูู)
lecture_info: {
  course_name: String,
  course_code: String,
  instructor_name: String,
  room_number: String,
  day_of_week: String,
  start_time: String,
  end_time: String,
  lecture_type: String
}
expiry_time: Date (ููุช ุงูุชูุงุก ุงูุจุงุฑููุฏ)
```

### 2. ุชุญุฏูุซ Barcodes Routes (`server/routes/barcodes.js`)

#### **GET /api/barcodes**
- โ ุฅุถุงูุฉ ููุชุฑุฉ ุญุณุจ `schedule_id`
- โ ุนุฑุถ ูุนูููุงุช ุงููุญุงุถุฑุฉ ูุน ุงูุจุงุฑููุฏ

#### **POST /api/barcodes**
- โ ุฅูุดุงุก ุจุงุฑููุฏ ููุญุงุถุฑุฉ ูุญุฏุฏุฉ ูู ุงูุฌุฏูู
- โ ุญุณุงุจ `expiry_time` ูู `end_time` ูููุญุงุถุฑุฉ
- โ ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุจุงุฑููุฏ ูููุณ ุงููุญุงุถุฑุฉ

**ุงููุนุงููุงุช ุงููุทููุจุฉ:**
```json
{
  "schedule_id": "ObjectId",
  "day_of_week": "ุงูุณุจุช",
  "lecture_index": 0
}
```

#### **POST /api/barcodes/generate-for-schedule** (ุฌุฏูุฏ)
- โ ุฅูุดุงุก ุจุงุฑููุฏุงุช ูุฌููุน ูุญุงุถุฑุงุช ุฌุฏูู ูุนูู
- โ ุฅูุดุงุก ุจุงุฑููุฏ ููู ูุญุงุถุฑุฉ ูู ูู ููู ูู ุงูุฃุณุจูุน
- โ ุญุณุงุจ `expiry_time` ููู ูุญุงุถุฑุฉ

**ุงููุนุงููุงุช ุงููุทููุจุฉ:**
```json
{
  "schedule_id": "ObjectId"
}
```

#### **POST /api/barcodes/scan**
- โ ุงูุชุญูู ูู `expiry_time` ูุจู ุงูุณูุงุญ ุจูุณุญ ุงูุจุงุฑููุฏ
- โ ุฅุฑุฌุงุน ูุนูููุงุช ุงููุญุงุถุฑุฉ ูุน ุงูุจุงุฑููุฏ

### 3. ุชุญุฏูุซ Attendance Routes (`server/routes/attendance.js`)

#### **POST /api/attendance/barcode**
- โ ุงูุชุญูู ูู `expiry_time` ูุจู ุชุณุฌูู ุงูุญุถูุฑ
- โ ุงุณุชุฎุฏุงู ูุนูููุงุช ุงููุญุงุถุฑุฉ ูู ุงูุจุงุฑููุฏ
- โ ุฑุจุท ุงูุญุถูุฑ ุจู `barcode_id` ุจุฏูุงู ูู `lecture_id` ููุท

**ุงูุชุญููุงุช:**
1. ุงูุจุงุฑููุฏ ููุฌูุฏ ููุดุท
2. ุงูุจุงุฑููุฏ ูู ููุชูู (`expiry_time > now`)
3. ุงูุจุงุฑููุฏ ูุทุงุจู ูุณู ููุฑุญูุฉ ุงูุทุงูุจ
4. ูู ูุชู ุชุณุฌูู ุงูุญุถูุฑ ูุณุจูุงู ูููุณ ุงูุจุงุฑููุฏ

### 4. ุชุญุฏูุซ Admin Panel (`admin-panel/app/barcodes/page.tsx`)

**ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:**
- โ ุนุฑุถ ุฌููุน ุงูุฌุฏุงูู ุงููุชุงุญุฉ
- โ ุฅูุดุงุก ุจุงุฑููุฏุงุช ูุฌููุน ูุญุงุถุฑุงุช ุฌุฏูู ูุนูู (ุฒุฑ ูุงุญุฏ)
- โ ุนุฑุถ ูุนูููุงุช ุงููุญุงุถุฑุฉ (ุงููุงุฏุฉุ ุงููุญุงุถุฑุ ุงููุงุนุฉุ ุงูููุช)
- โ ุนุฑุถ ููุช ุงูุชูุงุก ุงูุจุงุฑููุฏ
- โ ุนุฑุถ ุญุงูุฉ ุงูุจุงุฑููุฏ (ูุดุท/ููุชูู)
- โ ููุชุฑุฉ ุญุณุจ ุงูุฌุฏูู ุฃู ุงููุณู

**ุงูุนุฑุถ:**
- ุฌุฏูู ูุนุฑุถ: ุงููุงุฏุฉุ ุงููุญุงุถุฑุ ุงููููุ ุงูููุชุ ุงููุงุนุฉุ ููุช ุงูุงูุชูุงุกุ QR Codeุ ุงูุญุงูุฉ
- ุชูููุฒ ุงูุจุงุฑููุฏุงุช ุงูููุชููุฉ ุจุงูููู ุงูุฃุญูุฑ

## ๐ ุณูุฑ ุงูุนูู

### ุฅูุดุงุก ุจุงุฑููุฏ ููุญุงุถุฑุฉ:

1. **ูู Admin Panel:**
   - ุงุฎุชูุงุฑ ุฌุฏูู ุฏุฑุงุณู
   - ุงูุถุบุท ุนูู "ุฅูุดุงุก ููุฌุฏูู" ูุฅูุดุงุก ุจุงุฑููุฏุงุช ูุฌููุน ุงููุญุงุถุฑุงุช
   - ุฃู ุฅูุดุงุก ุจุงุฑููุฏ ููุญุงุถุฑุฉ ูุญุฏุฏุฉ

2. **ูู API:**
   ```bash
   POST /api/barcodes
   {
     "schedule_id": "...",
     "day_of_week": "ุงูุณุจุช",
     "lecture_index": 0
   }
   ```

### ุชุณุฌูู ุงูุญุถูุฑ:

1. ุงูุทุงูุจ ููุณุญ ุงูุจุงุฑููุฏ ูู ุงูุชุทุจูู
2. ุงููุธุงู ูุชุญูู ูู:
   - ุตุญุฉ ุงูุจุงุฑููุฏ
   - ุนุฏู ุงูุชูุงุก ุตูุงุญูุชู
   - ูุทุงุจูุฉ ุงููุณู ูุงููุฑุญูุฉ
3. ูุชู ุชุณุฌูู ุงูุญุถูุฑ ุชููุงุฆูุงู

## ๐ ูุซุงู ุนูู ุงูุจุงุฑููุฏ

```json
{
  "_id": "...",
  "schedule_id": "...",
  "lecture_info": {
    "course_name": "ููุงุนุฏ ุงูุจูุงูุงุช",
    "course_code": "CS301",
    "instructor_name": "ุฏ. ุฃุญูุฏ ูุญูุฏ",
    "room_number": "ูุงุนุฉ 101",
    "day_of_week": "ุงูุณุจุช",
    "start_time": "08:00",
    "end_time": "10:00",
    "lecture_type": "ูุธุฑู"
  },
  "department_id": "...",
  "department_name": "ุนููู ุงูุญุงุณูุจ",
  "year_level": 3,
  "barcode": "ุนููู ุงูุญุงุณูุจ-3-CS301-ุงูุณุจุช-08:00-...",
  "qr_code": "data:image/png;base64,...",
  "expiry_time": "2024-01-15T10:00:00.000Z",
  "is_active": true
}
```

## ๐ฏ ุงูููุงุฆุฏ

1. **ุฏูุฉ ุฃุนูู**: ูู ูุญุงุถุฑุฉ ููุง ุจุงุฑููุฏ ุฎุงุต
2. **ุฃูุงู**: ุงูุจุงุฑููุฏ ููุชูู ูุน ุงูุชูุงุก ุงููุญุงุถุฑุฉ
3. **ุณูููุฉ ุงูุฅุฏุงุฑุฉ**: ุฅูุดุงุก ุจุงุฑููุฏุงุช ูุฌุฏูู ูุงูู ุจุถุบุทุฉ ูุงุญุฏุฉ
4. **ุชุชุจุน ุฃูุถู**: ุฑุจุท ูุจุงุดุฑ ุจูู ุงูุญุถูุฑ ูุงููุญุงุถุฑุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

- ุงูุจุงุฑููุฏ ููุชูู ุชููุงุฆูุงู ุนูุฏ ููุช ุงูุชูุงุก ุงููุญุงุถุฑุฉ
- ูููู ุฅูุดุงุก ุจุงุฑููุฏุงุช ูุฌุฏูู ูุงูู ุฏูุนุฉ ูุงุญุฏุฉ
- ุงูุจุงุฑููุฏุงุช ุงููุฏููุฉ (ุญุณุจ ุงููุณู ูุงููุฑุญูุฉ) ุชุญุชุงุฌ ุฅูู ุชุญุฏูุซ
- ูุฌุจ ุฅูุดุงุก ุจุงุฑููุฏุงุช ุฌุฏูุฏุฉ ููู ูุตู ุฏุฑุงุณู

## ๐ง ุงููููุงุช ุงููุญุฏุซุฉ

1. `server/models/Barcode.js` - ุชุญุฏูุซ ุงููููุฐุฌ
2. `server/routes/barcodes.js` - ุชุญุฏูุซ Routes
3. `server/routes/attendance.js` - ุชุญุฏูุซ ุงูุชุญููุงุช
4. `admin-panel/app/barcodes/page.tsx` - ุชุญุฏูุซ ุงููุงุฌูุฉ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

- [ ] ุฅุถุงูุฉ ุชุฌุฏูุฏ ุชููุงุฆู ููุจุงุฑููุฏุงุช ูู ุฃุณุจูุน
- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ููุจุงุฑููุฏุงุช ุงูููุชููุฉ
- [ ] ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ุนู ุงุณุชุฎุฏุงู ุงูุจุงุฑููุฏุงุช
- [ ] ุชุญุฏูุซ ุงูุชุทุจูู ุงููุญููู ูุนุฑุถ ูุนูููุงุช ุงููุญุงุถุฑุฉ ุนูุฏ ูุณุญ ุงูุจุงุฑููุฏ

